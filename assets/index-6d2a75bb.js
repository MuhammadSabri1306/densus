import{_ as T,o as a,c as l,a as ee,u as F,b as C,r as N,d as X,e as Y,f as z,g as e,h as n,w as H,i as D,t as $,n as _,T as se,p as W,j as q,k as K,l as U,F as M,m as I,q as V,s as O,v as te,x as j,y as G,z as S,A as J,B as oe,C as ae,D as ne,E as Q,G as le,H as ie,I as re}from"./index-03a7c8f0.js";const ce={},de={class:"footer"},ue=ee('<div class="container-fluid"><div class="row justify-content-center"><div class="col-md-auto px-1"><p class="text-center">Copyright Â© 2022 <b>Innovation Team TR VII</b>.</p></div><div class="col-md-auto px-1"><p class="text-center">All rights reserved.</p></div></div></div>',1),_e=[ue];function pe(p,v){return a(),l("footer",de,_e)}const Z=T(ce,[["render",pe]]),ve="/assets/img/user1.png";const B=p=>(W("data-v-4c3c1f06"),p=p(),q(),p),he={class:"sidebar-user text-center"},me={class:"f-w-700 m-2 text-center tw-px-[15px]"},ge=B(()=>e("span",{class:"f-w-700 ms-2"},"Update Profil",-1)),fe=B(()=>e("span",{class:"f-w-700 ms-2"},"Ganti Password",-1)),be=B(()=>e("span",{class:"f-w-700 ms-2"},"Log Out",-1)),ye=B(()=>e("img",{class:"img-90 rounded-circle mx-auto",src:ve,alt:""},null,-1)),we=B(()=>e("div",{class:"badge-bottom"},[e("span",{class:"badge badge-primary"},"New")],-1)),ke={class:"mt-3 mb-1 f-14 f-w-600 font-primary"},$e={class:"mb-0 font-roboto text-uppercase f-w-700"},xe={class:"mb-0 font-roboto text-capitalize"},Se={__name:"DashboardSidebarUser",emits:["updateUser","updatePassword","logout"],setup(p,{emit:v}){const d=F(),h=C(()=>d.name),r=C(()=>d.location),w=C(()=>d.role),f=N(!1),u=()=>f.value=!1;X(()=>{document.body.addEventListener("click",u)}),Y(()=>{document.body.removeEventListener("click",u)});const x=C(()=>d.userData),P=N(!1),m=()=>{P.value=!0,d.fetchUserData(!1,()=>{P.value=!1,v("updateUser",x.value)})};return(y,c)=>{const o=z("vue-feather"),t=z("VueFeather");return a(),l("div",he,[e("a",{class:"setting-primary",role:"button",title:"setting",onClick:c[0]||(c[0]=H(i=>f.value=!f.value,["stop"]))},[n(o,{type:"settings"})]),(a(),D(se,{to:"body"},[e("ul",{class:_([{show:f.value},"setting-wrapper"])},[e("li",null,[e("p",me,$(h.value),1)]),e("li",null,[e("a",{role:"button",title:"update profil",onClick:m},[P.value?(a(),D(t,{key:0,type:"loader",animation:"spin",size:"1.5em"})):(a(),D(t,{key:1,type:"user",size:"1.5em"})),ge])]),e("li",null,[e("a",{role:"button",title:"ganti password",onClick:c[1]||(c[1]=i=>y.$emit("updatePassword"))},[n(t,{type:"key",size:"1.5em"}),fe])]),e("li",null,[e("a",{role:"button",onClick:c[2]||(c[2]=H(i=>y.$emit("logout"),["stop"])),title:"log out"},[n(t,{type:"lock",size:"1.5em"}),be])])],2)])),ye,we,e("h6",ke,$(h.value),1),e("p",$e,$(r.value),1),e("p",xe,"role "+$(w.value),1)])}}},Pe=T(Se,[["__scopeId","data-v-4c3c1f06"]]);const R=p=>(W("data-v-4f4bd184"),p=p(),q(),p),Ce={class:"main-navbar"},De=R(()=>e("div",{class:"left-arrow",id:"left-arrow"},[e("i",{"data-feather":"arrow-left"})],-1)),Ue={id:"mainnav"},Ve={class:"nav-menu custom-scrollbar"},Le=R(()=>e("li",{class:"back-btn"},[e("div",{class:"mobile-back text-end"},[e("span",null,"Back"),e("i",{class:"fa fa-angle-right ps-2","aria-hidden":"true"})])],-1)),Ne={key:0,class:"sidebar-main-title"},ze=R(()=>e("div",null,[e("h6",{class:"ms-2"},"Menu GePEE")],-1)),Oe=[ze],Ee=["onClick"],Me={class:"according-menu"},Ie={key:2,class:"nav-submenu menu-content"},Re={key:1,class:"sidebar-main-title"},Be=R(()=>e("div",null,[e("h6",{class:"ms-2"},"Menu OX ISP")],-1)),Ae=[Be],Te=["onClick"],Fe={class:"according-menu"},je={key:2,class:"nav-submenu menu-content"},Ge={key:2,class:"sidebar-main-title"},Je=R(()=>e("div",null,[e("h6",{class:"ms-2"},"Menu Management")],-1)),He=[Je],We=["onClick"],qe={class:"according-menu"},Ke={key:2,class:"nav-submenu menu-content"},Xe=R(()=>e("div",{class:"right-arrow",id:"right-arrow"},[e("i",{"data-feather":"arrow-right"})],-1)),Ye={__name:"DashboardSidebarMenu",setup(p){const v=F();C(()=>v.role);const d=K(),h=o=>({gepee:o.filter(t=>t.category=="gepee"),oxisp:o.filter(t=>t.category=="oxisp"),management:o.filter(t=>t.category=="management")}),r=C(()=>{const o=v.level,t=v.locationId,i=v.role,g=d.menuItems.filter(s=>s.roles.indexOf(i)<0?!1:(Array.isArray(s.child)&&(s.child=s.child.filter(k=>Array.isArray(k.roles)?k.roles.indexOf(i)>=0:!0)),!0)).map(s=>{if(!o||o=="nasional"||!t)return s;const k=s.key=="gepee_evidence";if(s.key=="pue"){const E=s.child.findIndex(A=>A.key=="online");if(E>=0){const A=JSON.parse(JSON.stringify(s));return A.child[E].to=`${s.child[E].to}/${o}/${t}`,A}}if(k){const E=JSON.parse(JSON.stringify(s));return E.to=`${s.to}/${o}/${t}`,E}return s});return h(g)}),w=C(()=>d.menuActKeys),f=(o,t)=>{const i=["gepee","oxisp","management"],g=i.indexOf(o);if(g<=0)return t;for(let s=0;s<g;s++)t+=r.value[i[s]].length;return t},u=N([]),x=()=>{Object.entries(r.value).forEach(([o,t])=>{let i=-1;for(let g=0;g<t.length;g++)i=f(o,g),t[g]&&w.value.length>0&&t[g].key==w.value[0]&&(u.value=[i])})},P=(o,t)=>{t=f(o,t),u.value.indexOf(t)<0?u.value=[...u.value,t]:u.value=u.value.filter(s=>s!==t)};x();const m=(o,t,i)=>(i=f(o,i),{dropdown:t,expand:u.value.indexOf(i)>=0}),y=(o,t)=>({active:o==w.value[0],"on-development-menu":t}),c=o=>({active:o===w.value[1]});return(o,t)=>{const i=z("vue-feather"),g=z("RouterLink");return a(),l("nav",null,[e("div",Ce,[De,e("div",Ue,[e("ul",Ve,[Le,r.value.gepee.length>0?(a(),l("li",Ne,Oe)):U("",!0),(a(!0),l(M,null,I(r.value.gepee,(s,k)=>(a(),l("li",{class:_([m("gepee",s.child,k),"py-1"])},[s.child?(a(),l("a",{key:1,onClick:b=>P("gepee",k),class:_([y(s.key,s.isDev),"nav-link menu-title"]),role:"button"},[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1),e("div",Me,[n(i,{type:"chevron-right"})])],10,Ee)):(a(),D(g,{key:0,to:s.to,class:_([y(s.key,s.isDev),"nav-link"])},{default:V(()=>[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1)]),_:2},1032,["to","class"])),s.child?(a(),l("ul",Ie,[(a(!0),l(M,null,I(s.child,b=>(a(),l("li",null,[n(g,{to:b.to,class:_(c(b.key))},{default:V(()=>[O($(b.title),1)]),_:2},1032,["to","class"])]))),256))])):U("",!0)],2))),256)),r.value.oxisp.length>0?(a(),l("li",Re,Ae)):U("",!0),(a(!0),l(M,null,I(r.value.oxisp,(s,k)=>(a(),l("li",{class:_([m("oxisp",s.child,k),"py-1"])},[s.child?(a(),l("a",{key:1,onClick:b=>P("oxisp",k),class:_([y(s.key,s.isDev),"nav-link menu-title"]),role:"button"},[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1),e("div",Fe,[n(i,{type:"chevron-right"})])],10,Te)):(a(),D(g,{key:0,to:s.to,class:_([y(s.key,s.isDev),"nav-link"])},{default:V(()=>[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1)]),_:2},1032,["to","class"])),s.child?(a(),l("ul",je,[(a(!0),l(M,null,I(s.child,b=>(a(),l("li",null,[n(g,{to:b.to,class:_(c(b.key))},{default:V(()=>[O($(b.title),1)]),_:2},1032,["to","class"])]))),256))])):U("",!0)],2))),256)),r.value.management.length>0?(a(),l("li",Ge,He)):U("",!0),(a(!0),l(M,null,I(r.value.management,(s,k)=>(a(),l("li",{class:_([m("management",s.child,k),"py-1"])},[s.child?(a(),l("a",{key:1,onClick:b=>P("management",k),class:_([y(s.key,s.isDev),"nav-link menu-title"]),role:"button"},[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1),e("div",qe,[n(i,{type:"chevron-right"})])],10,We)):(a(),D(g,{key:0,to:s.to,class:_([y(s.key,s.isDev),"nav-link"])},{default:V(()=>[n(i,{type:s.icon,size:"1.2rem",class:"me-2"},null,8,["type"]),e("span",null,$(s.title),1)]),_:2},1032,["to","class"])),s.child?(a(),l("ul",Ke,[(a(!0),l(M,null,I(s.child,b=>(a(),l("li",null,[n(g,{to:b.to,class:_(c(b.key))},{default:V(()=>[O($(b.title),1)]),_:2},1032,["to","class"])]))),256))])):U("",!0)],2))),256))])]),Xe])])}}},Qe=T(Ye,[["__scopeId","data-v-4f4bd184"]]),Ze=["onSubmit"],es={class:"mb-4"},ss=e("label",{for:"inputOldPass"},[O("Masukkan password lama "),e("span",{class:"text-danger"},"*")],-1),ts={class:"mb-4"},os=e("label",{for:"inputNewPass1"},[O("Masukkan password baru "),e("span",{class:"text-danger"},"*")],-1),as={class:"mb-5"},ns=e("label",{for:"inputNewPass2"},[O("Masukkan ulang password baru "),e("span",{class:"text-danger"},"*")],-1),ls={key:0,class:"mb-0 font-danger ms-4"},is={class:"d-flex justify-content-between align-items-end"},rs={__name:"DialogUpdatePassword",emits:["close"],setup(p,{emit:v}){const d=N(!0),h=()=>{d.value=!1,v("close")},{data:r,v$:w}=te({oldPass:{required:j},newPass1:{required:j},newPass2:{required:j}}),f=N(!1),u=N(!1),x=C(()=>u.value?r.newPass1===r.newPass2:!0),P=F(),m=K(),y=async()=>{if(u.value=!0,!await w.value.$validate()||!x.value)return!1;const o={old_password:r.oldPass,new_password:r.newPass1};f.value=!0,P.updatePassword(o,t=>{f.value=!1,t.success&&(m.showToast("Update Password","Berhasil menyimpan password baru.",!0),d.value=!1)})};return(c,o)=>(a(),D(S(oe),{header:"Update Password",visible:d.value,"onUpdate:visible":o[4]||(o[4]=t=>d.value=t),modal:"",draggable:"",onAfterHide:h},{default:V(()=>[e("form",{onSubmit:H(y,["prevent"]),class:"p-4"},[e("div",es,[ss,G(e("input",{type:"password","onUpdate:modelValue":o[0]||(o[0]=t=>S(r).oldPass=t),id:"inputOldPass",class:_([{"is-invalid":u.value&&S(w).oldPass.$invalid},"form-control"]),autofocus:""},null,2),[[J,S(r).oldPass]])]),e("div",ts,[os,G(e("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=t=>S(r).newPass1=t),id:"inputNewPass1",class:_([{"is-invalid":u.value&&S(w).newPass1.$invalid},"form-control"])},null,2),[[J,S(r).newPass1]])]),e("div",as,[ns,G(e("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=t=>S(r).newPass2=t),id:"inputNewPass2",class:_([{"is-invalid":u.value&&S(w).newPass2.$invalid},"form-control"])},null,2),[[J,S(r).newPass2]]),x.value?U("",!0):(a(),l("p",ls,"Password baru tidak cocok"))]),e("div",is,[e("button",{type:"submit",class:_([{"btn-loading":f.value},"btn btn-success btn-lg"])},"Update Password",2),e("button",{type:"button",onClick:o[3]||(o[3]=t=>d.value=!1),class:"btn btn-secondary"},"Batalkan")])],40,Ze)]),_:1},8,["visible"]))}};const L=p=>(W("data-v-a17a54f7"),p=p(),q(),p),cs={class:"page-wrapper compact-wrapper viho-theme",id:"pageWrapper"},ds={class:"main-header-right row m-0"},us={class:"main-header-left"},_s={class:"logo-wrapper"},ps=L(()=>e("img",{src:Q,class:"img-fluid brand-logo",alt:""},null,-1)),vs={class:"dark-logo-wrapper"},hs=L(()=>e("img",{src:Q,class:"img-fluid brand-logo",alt:""},null,-1)),ms={class:"left-menu-header col"},gs={class:"form-inline search-form"},fs={class:"search-bg"},bs=L(()=>e("input",{class:"form-control-plaintext",placeholder:"Search here....."},null,-1)),ys={class:"d-sm-none mobile-search search-bg"},ws={class:"nav-right col pull-right right-menu p-0"},ks={class:"nav-menus"},$s={class:"text-dark",href:"#!",onclick:"javascript:toggleFullScreen()"},xs={class:"onhover-dropdown"},Ss={class:"notification-box"},Ps=L(()=>e("span",{class:"dot-animated"},null,-1)),Cs={class:"notification-dropdown onhover-show-div"},Ds=L(()=>e("li",null,[e("p",{class:"f-w-700 mb-0"},[O("You have 3 Notifications"),e("span",{class:"pull-right badge badge-primary badge-pill"},"4")])],-1)),Us={class:"noti-primary"},Vs={class:"media"},Ls={class:"notification-bg bg-light-primary"},Ns=L(()=>e("div",{class:"media-body"},[e("p",null,"Delivery processing "),e("span",null,"10 minutes ago")],-1)),zs={class:"noti-secondary"},Os={class:"media"},Es={class:"notification-bg bg-light-secondary"},Ms=L(()=>e("div",{class:"media-body"},[e("p",null,"Order Complete"),e("span",null,"1 hour ago")],-1)),Is={class:"noti-success"},Rs={class:"media"},Bs={class:"notification-bg bg-light-success"},As=L(()=>e("div",{class:"media-body"},[e("p",null,"Tickets Generated"),e("span",null,"3 hour ago")],-1)),Ts={class:"noti-danger"},Fs={class:"media"},js={class:"notification-bg bg-light-danger"},Gs=L(()=>e("div",{class:"media-body"},[e("p",null,"Delivery Complete"),e("span",null,"6 hour ago")],-1)),Js={class:"onhover-dropdown p-0"},Hs={class:"d-lg-none mobile-toggle pull-right w-auto"},Ws={class:"page-body-wrapper"},qs={class:"page-body"},Ks={__name:"Dashboard",setup(p){const v=K(),d=C(()=>v.hideSidebar),h=ae();h.beforeEach(()=>{v.resetSidebarVisibility()});const r=()=>v.resetSidebarVisibility();X(()=>window.addEventListener("resize",r)),Y(()=>window.addEventListener("resize",r)),v.resetSidebarVisibility();const w=F(),f=()=>{confirm("Anda akan keluar dari DENSUS. Lanjutkan?")&&(w.logout(),h.push("/login"))},u=N(!1),x=N(null);return(P,m)=>{const y=z("RouterLink"),c=z("vue-feather"),o=z("RouterView");return a(),l("div",cs,[e("div",{class:_([{close_icon:d.value},"page-main-header"])},[e("div",ds,[e("div",us,[e("div",_s,[n(y,{to:"/",title:"Dashboard"},{default:V(()=>[ps]),_:1})]),e("div",vs,[n(y,{to:"/",title:"Dashboard"},{default:V(()=>[hs]),_:1})]),e("div",{onClick:m[0]||(m[0]=t=>S(v).toggleSidebarVisibility()),class:"toggle-sidebar",tabindex:"0",role:"button","aria-pressed":"false",title:"Toggle Sidebar"},[n(c,{type:"align-center",class:"status_toggle middle"})])]),e("div",ms,[e("ul",null,[e("li",null,[e("form",gs,[e("div",fs,[n(c,{type:"search",strokeWidth:"3.8",style:{width:"0.9rem"}}),bs])]),e("span",ys,[n(c,{type:"search",strokeWidth:"3.8",style:{width:"0.9rem"}})])])])]),e("div",ws,[e("ul",ks,[e("li",null,[e("a",$s,[n(c,{type:"maximize"})])]),e("li",xs,[e("div",Ss,[n(c,{type:"bell"}),Ps]),e("ul",Cs,[Ds,e("li",Us,[e("div",Vs,[e("span",Ls,[n(c,{type:"activity"})]),Ns])]),e("li",zs,[e("div",Os,[e("span",Es,[n(c,{type:"check-circle"})]),Ms])]),e("li",Is,[e("div",Rs,[e("span",Bs,[n(c,{type:"file-text"})]),As])]),e("li",Ts,[e("div",Fs,[e("span",js,[n(c,{type:"user-check"})]),Gs])])])]),e("li",Js,[e("button",{onClick:f,class:"btn btn-primary-light btn-icon"},[n(c,{type:"log-out"}),O("Log out")])])])]),e("div",Hs,[n(c,{type:"more-horizontal"})])])],2),e("div",Ws,[e("header",{class:_([{close_icon:!d.value},"main-nav"])},[n(Pe,{onUpdateUser:m[1]||(m[1]=t=>x.value=t),onUpdatePassword:m[2]||(m[2]=t=>u.value=!0),onLogout:f}),n(Qe)],2),e("main",qs,[n(o)]),n(Z)]),u.value?(a(),D(rs,{key:0,onClose:m[3]||(m[3]=t=>u.value=!1)})):U("",!0),x.value?(a(),D(ne,{key:1,isCurrUser:"",data:x.value,onDie:m[4]||(m[4]=t=>x.value=null)},null,8,["data"])):U("",!0)])}}},Xs=T(Ks,[["__scopeId","data-v-a17a54f7"]]),Ys={class:"viho-theme"},Qs={__name:"SinglePage",setup(p){return(v,d)=>{const h=z("RouterView");return a(),l("div",Ys,[n(h),n(Z)])}}},et={__name:"index",setup(p){const v=le(),d=C(()=>{const h=v.name;return["login","e404"].indexOf(h)<0?Xs:Qs});return ie(()=>{const h=document.getElementById("loader");h&&(h.classList.add("hide"),setTimeout(function(){h.remove()},700))}),(h,r)=>(a(),D(re(d.value)))}};export{et as default};
